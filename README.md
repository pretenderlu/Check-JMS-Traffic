
# 流量与余额监控工具

![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg)
![Python Version](https://img.shields.io/badge/python-3.6%2B-blue)

一个适用于青龙面板的流量与余额监控工具，可以实时检查JMS服务的流量使用情况，并通过多种渠道发送通知，同时查询DeepSeek和硅基流动的用户账户余额。

## 📑 功能特点

- 🔍 自动检查JMS流量使用情况，并详细输出已使用流量、总流量限制和剩余流量。
- 📅 显示下次流量重置日及当天的检查时间。
- 💵 查询DeepSeek账户余额，包括账户总余额、授予余额和充值余额，并输出详细信息。
- 💰 查询硅基流动账户余额，包括账户总余额、赠送余额和充值余额，并输出详细信息。
- 📱 支持多种通知方式（Server酱³、Telegram）。
- ⚠️ 当流量使用超过阈值时发出警告，根据使用情况自动调整通知标题。
- 🕒 可设置定时自动检查，确保随时掌握使用情况。

## 🚀 快速开始

### 在青龙面板中使用

1. 在青龙面板中创建新的Python脚本，命名为 `traffic_and_balance_monitor.py`。
2. 将最新脚本内容复制到创建的文件中。
3. 在"依赖管理"中添加 `requests` 依赖。
4. 在"环境变量"中添加所需的配置信息。
5. 设置定时任务（建议每天上午10点运行：`0 10 * * *`）。

### 环境变量配置

在青龙面板的"环境变量"中添加以下变量：

| 变量名 | 必填 | 说明 |
|-------|------|------|
| `JMS_API_URL` | 是 | JMS API的URL地址 |
| `SC_UID` | 否 | Server酱³的UID |
| `SC_SENDKEY` | 否 | Server酱³的SendKey |
| `TG_BOT_TOKEN` | 否 | Telegram机器人Token |
| `TG_USER_ID` | 否 | Telegram用户ID |
| `DEEPSEEK_API_KEY` | 否 | DeepSeek的API密钥 |
| `SILICONFLOW_API_KEY` | 否 | 硅基流动的API密钥 |

## 📋 输出信息

在运行过程中，脚本将实时在控制台输出：

### JMS流量使用情况
- 流量检查的成功与否
- 检查到的详细结果，包括已使用的流量、总流量、剩余流量和下次重置日

### DeepSeek账户余额
- DeepSeek余额查询的成功与否
- 详细的余额信息，包括账户总余额、授予余额和充值余额

### 硅基流动账户余额
- 硅基流动余额查询的成功与否
- 详细的余额信息，包括账户总余额、赠送余额和充值余额

### 错误信息
- 任何发生的错误信息和异常处理结果

这些输出信息使得用户能够清晰了解脚本的执行过程和每一步的结果。

## 🔄 更新日志

### 2025-06-02
- 新增硅基流动账户余额查询功能
- 硅基流动余额显示详细的三项数据：账户总余额、赠送余额、充值余额
- 更新通知格式，现在包含三个部分的信息

### 2025-04-27
- 更新脚本以支持详细的实时输出，包含每个检测过程的结果和潜在错误信息
- 增强错误处理功能，确保脚本在某个检查失败时仍能继续执行
- 将"Server酱3"统一修改为"Server酱³"

### 2025-04-25
- 完成项目重命名为流量与余额监控工具，并实现新的功能
- 更新通知格式，清晰分为"JMS流量使用情况"和"DeepSeek账户余额"

## 📱 通知内容示例

监控报告将包含以下三个部分的信息：

```
## JMS流量使用情况
- 已使用流量: **15.2 GB**
- 总流量限制: **100.0 GB**
- 剩余流量: **84.8 GB**
- 下次重置日: **2025-07-01**
- 检查时间: **2025-06-02 10:00:00**

## DeepSeek账户余额
- 账户总余额: **25.50 CNY**
- 授予余额: **20.00 CNY**
- 充值余额: **5.50 CNY**

## 硅基流动账户余额
- 账户总余额: **18.88 CNY**
- 赠送余额: **10.00 CNY**
- 充值余额: **8.88 CNY**
```

## 📝 注意事项

1. 请确保青龙面板中的Python版本为3.6或以上。
2. 至少需要设置`JMS_API_URL`环境变量，通知功能和其他API查询功能是可选的。
3. 如果API返回的数据结构有变化，请相应调整脚本中的数据处理逻辑。
4. 当使用Server酱³时，需要同时设置`SC_UID`和`SC_SENDKEY`两个环境变量。
5. DeepSeek和硅基流动的API密钥为可选配置，如果不设置对应的环境变量，脚本会跳过相应的查询。

## 🛠️ 故障排除

- 如果某个API查询失败，脚本会继续执行其他查询，确保至少能获取到部分信息。
- 所有错误信息都会在控制台输出，便于排查问题。
- 建议定期检查API密钥的有效性和权限设置。

## 📄 许可证

本项目采用MIT许可证 - 详情请参阅 [LICENSE](LICENSE) 文件。
